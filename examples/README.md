# MAS协作模式演示案例

本目录包含了基于阿里安全部探索的多智能体协作方式的完整演示案例，展示Nagent框架支持的各种MAS协作模式。

## 📁 演示文件概览

### 🔰 基础演示案例

#### 1. `mas_cooperation_patterns_demo.py`
**基础MAS协作模式演示**
- 🤖 **ReACT Agent模式**: 单Agent的推理-行动-观察循环
- 🛣️ **路由模式**: 智能请求路由到专业Agent
- 🔄 **顺序协作模式**: 标准工作流程的Agent链式协作

```bash
python examples/mas_cooperation_patterns_demo.py
```

#### 2. `advanced_mas_patterns_demo.py`  
**高级MAS协作模式演示**
- 👑 **主从层次模式**: Planner-Worker协调架构
- 🔄 **反思模式**: 执行-反思的二人转协作
- 🗣️ **辩论模式**: 多专家集成决策系统

```bash
python examples/advanced_mas_patterns_demo.py
```

### 🎮 交互式演示

#### 3. `mas_pattern_selector.py`
**交互式MAS模式选择器**
- 📋 菜单式选择不同协作模式
- 🎯 单独演示特定模式
- 🎉 批量演示多种模式

```bash
python examples/mas_pattern_selector.py
```

**使用示例**:
```
🔐 MAS协作模式演示器
==================================================
请选择要演示的协作模式:

  1. ReACT Agent模式
  2. 路由模式
  3. 顺序协作模式
  4. 主从层次模式
  5. 反思模式
  6. 辩论模式
  7. 群聊模式
  8. 🎉 全部演示

  0. 退出
==================================================
请选择模式 (0-8): 
```

### 🔐 网络安全场景演示

#### 4. `security_scenario_demo.py`
**网络安全场景MAS协作演示**

模拟阿里安全部的"虚拟网络安全专家团队"，展示真实安全事件处理流程：

**安全团队配置**:
- 🔍 **SOC分析师**: 事件分析、威胁分类、初步响应
- 🔬 **恶意软件分析师**: 恶意软件逆向、行为分析、IOC提取  
- 🕵️ **网络取证专家**: 数字取证、证据收集、攻击链重建
- ⚡ **事件响应专家**: 事件指挥、响应协调、决策制定
- 🌐 **威胁情报分析师**: 威胁情报、归因分析、趋势预测
- 🛡️ **安全架构师**: 安全架构、防护建议、风险评估

**演示场景**:
1. 📋 **标准事件响应工作流程**: 完整的安全事件处理链
2. 🔍 **多专家协作调查**: 并行调查复杂APT攻击

```bash
python examples/security_scenario_demo.py
```

## 🎯 支持的MAS协作模式

### 1. ReACT Agent模式
**单Agent循环执行**
- 推理 (Reason) → 行动 (Act) → 观察 (Observe)
- 适用于需要迭代分析的复杂任务
- 支持Agent记忆和学习机制

### 2. 路由模式  
**智能意图识别和任务分发**
- 基于请求类型自动路由到专业Agent
- 支持负载均衡和故障转移
- 实现BIR路由器的智能调度

### 3. 简单顺序模式
**标准工作流程协作**
- 固定顺序的Agent链式执行
- 上下文在Agent间传递和累积
- 适用于标准操作程序(SOP)

### 4. 主从层次模式
**Planner-Worker架构**
- 协调者制定计划并分配子任务
- Worker Agent并行执行具体任务
- 协调者汇总结果和制定决策

### 5. 反思模式
**执行-反思二人转**
- 执行者完成任务
- 反思者评估和改进
- 迭代优化直到满意结果

### 6. 辩论模式
**多专家集成决策**
- 多个专家Agent提供独立意见
- 考虑其他意见后修正观点
- 协调者基于所有意见做最终决策

### 7. 群聊模式
**非顺序多人协作**
- 动态选择发言者
- 维护群聊历史记录
- 支持话题驱动的协作

## 🏗️ 框架优势

### vs Workflow方案
- ✅ **原生多Agent支持**: 真正的分布式架构而非workflow模拟
- ✅ **企业级治理**: SLA、成本、合规统一管控  
- ✅ **真正异步并行**: 支持完全异步Agent协作
- ✅ **动态扩展**: 运行时动态添加/删除Agent
- ✅ **生产级可靠性**: 容器化、服务发现、故障转移

### vs 传统Agent框架
- 🎯 **企业级架构**: 五大控制域完整设计
- 🔧 **统一治理**: 内外Agent统一管理
- 📊 **完整监控**: 分布式追踪和指标收集
- 🔄 **协议支持**: A2A、MCP等多协议集成
- 🛡️ **安全合规**: 企业级安全和合规控制

## 🚀 快速开始

### 环境准备
```bash
# 安装依赖
pip install -r requirements.txt

# 进入演示目录
cd examples
```

### 运行基础演示
```bash
# 基础协作模式
python mas_cooperation_patterns_demo.py

# 高级协作模式  
python advanced_mas_patterns_demo.py

# 网络安全场景
python security_scenario_demo.py
```

### 交互式体验
```bash
# 启动交互式选择器
python mas_pattern_selector.py
```

## 📋 演示输出示例

### ReACT Agent模式
```
🤖 1. ReACT Agent模式演示
============================================================
🎯 安全事件: 检测到可疑恶意软件活动

🔄 ReACT循环处理:

  🧠 循环 1:
    💭 推理: 分析恶意软件特征和影响范围
    🎬 行动: 完成任务: 执行威胁检测行动 1
    👀 观察: 置信度 0.85, 发现 2 个建议

✅ ReACT模式完成，Agent记忆中有 3 条记录
```

### 主从层次模式
```
👑 4. 主从层次模式演示 (Manus模式)
============================================================
🎯 复杂任务: 对新收购公司进行全面安全评估

👑 协调者制定执行计划:
  📋 计划制定: 完成任务: 制定安全评估计划

📤 分发子任务:
  🎯 threat_detection: 网络威胁检测
    ✅ 完成: 置信度: 0.85
```

### 网络安全事件响应
```
🔐 网络安全事件响应工作流程演示
============================================================
🚨 安全事件触发:
   ID: SEC_1703123456_7890
   类型: 恶意软件检测
   等级: 高
   描述: 在员工工作站检测到疑似恶意软件

📋 启动标准事件响应流程:

🔍 第1步: SOC分析师初步分析
   结果: 完成任务: 初步分析安全事件...

⚡ 第2步: 事件指挥官风险评估
   决策: 完成任务: 评估事件风险和影响...
```

## 🎓 学习资源

### 理论基础
- 📖 阿里安全部多智能体虚拟网络安全专家探索
- 📖 企业级Agent架构21个模块实践
- 📖 BIR到ACP到Reasoner的控制闭环设计

### 代码架构
- 🏗️ `src/coordination/`: 协调域实现
- 🔧 `src/communication/`: 通信域和路由
- ⚙️ `src/execution/`: 执行域和工具调用
- 💾 `src/state/`: 状态域和上下文管理
- 📊 `src/monitoring/`: 监控域和追踪

## 🤝 扩展开发

### 添加新的协作模式
1. 继承 `MASCooperationPatternsDemo` 类
2. 实现新的 `demonstrate_xxx_pattern()` 方法
3. 添加到选择器菜单中

### 定制安全场景
1. 扩展 `SecurityEventType` 枚举
2. 添加新的事件模板
3. 实现专门的处理流程

### 集成真实系统
1. 替换Mock类为真实实现
2. 配置真实的Agent连接
3. 接入企业安全系统API

---

💡 **提示**: 这些演示案例完整展示了Nagent框架的企业级多智能体协作能力，特别适合网络安全、业务流程自动化等需要多专家协作的场景。

🔐 **安全注意**: 演示中的安全事件和响应流程仅用于技术展示，请勿用于真实安全环境。 